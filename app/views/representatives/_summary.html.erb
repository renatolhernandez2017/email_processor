<ul class="menu rounded-box">
  <li>
    <ul class="border-l-2 border-b-2 border-primary">
      <div class="overflow-hidden my-2">
        <table class="table-auto w-full text-center">
          <thead class="text-base">
            <tr>
              <th>ID</th>
              <th>Prescritor</th>
              <th>Quantidade</th>
              <th>Total</th>
              <th>Parceria</th>
              <th>Descontos</th>
              <th>Valor Disponivel</th>
              <th>Tipo</th>
              <th>NÃºmero Envelope</th>
            </tr>
          </thead>

          <tbody>
            <% representative.monthly_reports.includes(:prescriber).order("prescribers.name ASC").each do |monthly_report| %>
              <tr class="bg-gray-200 border-t border-b border-black h-8">
                <td><%= monthly_report.prescriber.id %></td>

                <td>
                  <%= link_to monthly_report.prescriber.name,
                      patient_listing_prescriber_path(monthly_report.prescriber), class: "text-primary"
                  %>
                </td>

                <td class="text-center"><%= monthly_report.quantity %></td>
                <td><%= number_to_currency(monthly_report.total_price) %></td>
                <td><%= number_to_currency(monthly_report.partnership) %></td>
                <td><%= number_to_currency(monthly_report.discounts) %></td>
                <td><%= number_to_currency(monthly_report.available_value) %></td>
                <td><%= payment_method_display(monthly_report) %></td>
                <td><%= monthly_report.envelope_number.to_s.rjust(6, "0") %></td>
              </tr>
            <% end %>
          </tbody>

          <tfoot>
            <thead>
              <tr>
                <th class="font-semibold text-base pt-10">Quantidade</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td><%= representative.reports_count %></td>
                <td class="font-semibold text-base">Total Geral</td>
                <td class="text-center"><%= representative.total_quantity %></td>
                <td><%= number_to_currency(representative.total_price) %></td>
                <td><%= number_to_currency(representative.total_partnership) %></td>
                <td><%= number_to_currency(representative.total_discounts) %></td>
                <td><%= number_to_currency(representative.with_available_value) %></td>
              </tr>

              <tr>
                <td><%= representative.accumulated_reports_count %></td>
                <td class="font-semibold text-base">Acumulados</td>
                <td class="text-center"><%= representative.accumulated_quantity %></td>
                <td><%= number_to_currency(representative.accumulated_price) %></td>
                <td><%= number_to_currency(representative.accumulated_partnership) %></td>
                <td><%= number_to_currency(representative.accumulated_discounts) %></td>
                <td><%= number_to_currency(representative.available_value_accumulated) %></td>
              </tr>

              <tr>
                <td><%= representative.real_sale_reports_count %></td>
                <td class="font-semibold text-base">Venda Real</td>
                <td class="text-center"><%= representative.real_sale_quantity %></td>
                <td><%= number_to_currency(representative.real_sale_total_price) %></td>
                <td><%= number_to_currency(representative.real_sale_partnership) %></td>
                <td><%= number_to_currency(representative.real_sale_discounts) %></td>
                <td><%= number_to_currency(representative.available_value_real_sale) %></td>
              </tr>
            </tbody>
          </tfoot>
        </table>
      </div>
    </ul>
  </li>
</ul>

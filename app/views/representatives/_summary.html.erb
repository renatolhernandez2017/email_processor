<ul class="menu rounded-box">
  <li>
    <ul class="border-l-2 border-primary">
      <div class="overflow-hidden">
        <table class="table-auto w-full">
          <thead class="text-base">
            <tr>
              <th>ID</th>
              <th>Prescritor</th>
              <th>Quantidade</th>
              <th>Total</th>
              <th>Parceria</th>
              <th>Descontos</th>
              <th>Valor Disponivel</th>
              <th>Tipo</th>
              <th>NÃºmero Envelope</th>
            </tr>
          </thead>

          <tbody>
            <% monthly_reports.each do |monthly_report| %>
              <tr class="bg-gray-200 border-t border-b border-black h-8">
                <td><%= monthly_report.prescriber.id %></td>

                <td>
                  <%= link_to monthly_report.prescriber.name, prescriber_path(monthly_report.prescriber), class: "text-primary" %>
                </td>

                <td class="text-center"><%= monthly_report.quantity %></td>
                <td><%= number_to_currency(monthly_report.total_price) %></td>
                <td><%= number_to_currency(monthly_report.partnership) %></td>
                <td><%= number_to_currency(monthly_report.discounts) %></td>
                <td><%= number_to_currency(monthly_report.available_value) %></td>

                <td>
                  <% if monthly_report.accumulated? %>
                    Acumulado
                  <% elsif !monthly_report.accumulated? && monthly_report.prescriber.current_accounts.last.present? %>
                    <%= monthly_report.prescriber.current_accounts.last.bank.name %>
                  <% else %>
                    Dinheiro
                  <% end %>
                </td>

                <td><%= monthly_report.envelope_number.to_s.rjust(6, '0') %></td>
              </tr>
            <% end %>
          </tbody>

          <tfoot>
            <thead>
              <tr>
                <th class="font-semibold text-base pt-10">Quantidade</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td><%= monthly_reports.count %></td>
                <td class="font-semibold text-base">Total Geral</td>
                <td class="text-center"><%= monthly_reports.sum(&:quantity) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:total_price)) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:partnership)) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:discounts)) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:available_value)) %></td>
              </tr>

              <tr>
                <td><%= accumulated.count %></td>
                <td class="font-semibold text-base">Acumulados</td>
                <td class="text-center"><%= accumulated.sum(&:quantity) %></td>
                <td><%= number_to_currency(accumulated.sum(&:total_price)) %></td>
                <td><%= number_to_currency(accumulated.sum(&:partnership)) %></td>
                <td><%= number_to_currency(accumulated.sum(&:discounts)) %></td>
                <td><%= number_to_currency(accumulated.sum(&:available_value)) %></td>
              </tr>

              <tr>
                <td><%= monthly_reports.count %></td>
                <td class="font-semibold text-base">Venda Real</td>
                <td class="text-center"><%= monthly_reports.sum(&:quantity) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:total_price)) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:partnership)) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:discounts)) %></td>
                <td><%= number_to_currency(monthly_reports.sum(&:available_value)) %></td>
              </tr>
            </tbody>
          </tfoot>
        </table>
      </div>
    </ul>
  </li>
</ul>

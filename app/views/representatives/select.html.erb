<%= render "actions", title: @title %>

<section class="flex flex-col mb-20 my-5">
  <% @representatives.each do |representative| %>
    <% if @select_action == "patient_listing" %>
      <%= render "shared/patient/listing", representative_name: representative.name,
          closing: @closing, prescribers: @prescribers[representative.id]
      %>
    <% elsif @select_action == "summary_patient_listing" %>
      <%= render "shared/patient_listing", representative_name: representative.name,
          closing: @closing, prescribers: @prescribers[representative.id]
      %>
    <% elsif @select_action == "monthly_summary" %>
      <div class="card shadow-lg border border-primary p-5 my-5">
        <%= render "shared/label_of", representative_name: representative.name, closing: @closing, title: "Resumo de" %>
        <%= render "summary", prescribers: @prescribers[representative.id], totals: @totals[representative.id] %>
        <%= render "totals_by_bank", banks: @totals_by_bank[representative.id], totals_from_banks: @totals_from_banks[representative.id] %>
        <%= render "totals_by_store", stores: @totals_by_store[representative.id], totals_from_stores: @totals_from_stores[representative.id] %>
        <%= render "note_division", cashes: @total_in_cash[representative.id] %>
      </div>
    <% elsif @select_action == "tags" %>
      <%= render "tags", representative_name: representative.name,
          current_closing: @current_closing, closing: @closing,
          monthly_reports: @monthly_reports[representative.id]
      %>
    <% elsif @select_action == "address_report" %>
      <div class="card border border-primary p-5 my-2">
        <%= render "shared/label_of", representative_name: representative.name,
            closing: @closing, title: "Clientes de"
        %>

        <%= render "shared/address", monthly_reports: @monthly_reports[representative.id] %>
      </div>
    <% end %>
  <% end %>
</section>

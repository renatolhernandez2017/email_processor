<%= render "actions", title: "Lista de Representantes" %>

<div class="flex flex-col justify-center w-full my-10">
  <div id="actives" class="tabs flex justify-center">
    <input type="radio" name="active" id="active" class="tab-radio hidden" checked />
    <label for="active" class="tab px-4 border rounded-tl-lg rounded-tr-none !rounded-bl-lg cursor-pointer">
      Ativos
    </label>

    <input type="radio" name="active" id="inactive" class="tab-radio hidden" />
    <label for="inactive" class="tab px-4 border rounded-tl-none rounded-tr-lg !rounded-br-lg cursor-pointer">
      Inativos
    </label>
  </div>

  <div id="activesTabs" class="tab-contents w-full mt-6">
    <div class="tab-content block">
      <%= render "actives", representatives: @representatives %>
    </div>

    <div class="tab-content hidden">
      <%= render "inactives", representatives: @representatives_inactives %>
    </div>
  </div>
</div>

<script>
  document.addEventListener("turbo:load", initActiveInactive);
  document.addEventListener("DOMContentLoaded", initActiveInactive);

  function initActiveInactive() {
    const labels = document.querySelectorAll("#actives label");
    const radios = document.querySelectorAll(".tab-radio");
    const contents = document.querySelectorAll("#activesTabs .tab-content");

    function updateTabs(activeIndex) {
      labels.forEach((label, i) => {
        label.classList.toggle("bg-primary", i === activeIndex);
        label.classList.toggle("text-white", i === activeIndex);
      });

      contents.forEach((c, i) => {
        c.classList.toggle("hidden", i !== activeIndex);
        c.classList.add("block", i !== activeIndex);
      });
    }

    // Inicializa com a primeira aba ativa
    radios.forEach((radio, i) => {
      if (radio.checked) updateTabs(i);
    });

    // Listener nos labels
    labels.forEach((label, i) => {
      label.addEventListener("click", () => {
        radios[i].checked = true; // atualiza o radio
        updateTabs(i);
      });
    });
  }
</script>
